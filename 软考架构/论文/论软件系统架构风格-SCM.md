# 论软件系统架构风格

# 一、摘要300

## 1 通用模块150

2020年1月，我所在的某电子产品公司，成立了研发项目组，组织开发了一个旨在打造官方订货渠道，厂家直供，大品牌生态等愿景的“xx供应链平台”项目。在该项目中，我担任系统架构设计师的职务，主要负责整体架构设计，中间件选型等工作。



## 2 正文概括150

本文以该供应链项目为例，主要讨论了软件架构风格在该项目中的具体应用。

底层架构风格我们采用了虚拟机风格中的解释器，因为在对帐模块中，我们需要解析并处理多个支付渠道的交易文件、帐务文件，并按照不同的规则与平台数据进行比对。使用解释器风格可以将逻辑代码从业务代码中分离出来，单独变化，以满足对帐规则改变时不用修改代码。 同时降低编码风险。

中间层关于应用层的数据流转我们采用了独立构件风格中的隐式调用，这种风格主要用于减低系统间耦合度、简化软件架构，提高可修改性方面的架构属性；

应用系统层我们采用了B/S的架构风格，统一解决公交行业性难题“实施推广难、维护难”问题。最终项目成功上线，获得用户的一致好评。





```bash
# 1集成平安银行接口
# 2极光推送
# 3

```

```bash
数据流风格：指处理、管道-过滤器
调用返回风格：主-子程序、面向对象、层次结构
独立构件风格：进程通信、事件驱动
虚拟机风格：解释器、规则系统
仓库风格：数据库、黑板、超文本
```








---

# 二、背景400

## 3 项目原因200

```bash
为了解决公司营收近几年在一定范围徘徊不前的问题，公司策划了一个名为More的商业战略。喻在扩展，扩展更多的品类，更多的渠道等，突破发展瓶颈。为配合公司的More战略的实施，方便品牌快速招商，承载供应商、采购商，以及深耕优化公司原有的商家在线交易，深层次推广公司平台内的所有商品，增加商品推广效率、曝光率。特搭建符合公司渠道深耕管理、供应商和采购商新增引入More供应链平台，以辅助解决More品牌的运营管理难题：
1. 供应商入驻后无供应信息在线发布平台
2. 采购商入驻后无More产品快速浏览、自主订货的入口
3. 加盟商在线店铺未经营商品，但平台在经营商品的推广、导流
4. More现货产品和期货产品需要执行合规监管
5. 采购商无法及时向多个商家发布采购需求
6. 无在线担保交易、确保平台、供应商、采购商三方应有利益
```



## 4 项目功能200

```bash
	实现供应商与采购商在线交易；
	给供应商提供一个商品展示平台，给采购商提供一个需求发布平台；
	拓展供应渠道与销售渠道，同时优化深耕公司原有销售渠道；
	实现在线担保支付；
```





# 三、过度300

## 5 过渡300

```bash
在架构工作开始阶段，我们便意识到架构,架构风格是一组设计原则，是能够提供抽象框架模式，可以为我们的项目提供能用解决方案的，这种能够极大提高软件设计的重用的方法加快我们的建设进程。因此在我司总工程师的建议下，我们使用了虚拟机风格、独立构件方格以及B/S架构风格这有一种较常用风格。虚拟机风格中的解释器风格能够提供灵活在解析引擎，这类风格非常适用于复杂流程的处理。独立构件风格包括进程通信风格与隐式风格，我们为了简化架构复杂度采用了隐式调用风格，通过消息订阅和发布控制系统间信息交互，不仅能降低系统耦合度，而且还提高架构的可修改性。B/S架构风格是基于浏览器和服务器的软件架构，它主要使用http协议进行通信和交互，简化客户端的工作，最终降低了系统推广和维护的难度。以下正文将重点描述架构风格的实施过程和效果。
```





# 四、正文 1000

## 6 回应2.1

## 7 回应2.2

中间层我们使用独立构件风格中的隐匿调用来简化构件间的交互复杂度，降低系统的耦合度。主要的实现手段是，我们采用了一个开源的消中间件作为连接构件，这个构件是apache基金会下的核心开源项目activemq，它是一款消息服务器，其性能和稳定性久经考验。由上文提到的解释器解析出对象化数据经过activemq分发到各个订阅此消息的应用系统，这些应用系统包括运营指挥高度、自动化机护、新能源电池安全监控等，这种多web应用的情况非常适合采用消息发布与消息订阅的机制，能够有效解决耦合问题，我们在编码的过程中发现只要采用这种风格的web应用，整个迭代过程效率极高，错误率降低，而且我们使用的spring框架，消息队列的管理完全基于配置，清晰简单，维护性良好，例如整车安全主题、运营高度主题、机护维修主题等消息队列分类清晰，可以随时修改其结构也能够随时增其他主题的消息队列，不同的web系统监听的队列也可以随时变换组合，基于消息中间伯的架构设计能够让系统的构件化思路得到良好实施，总体来说这种架构风格带来了非常清晰的数据流转架构，简化了编码难度，降低了项目的二次开发的难度。



## 8 回应2.3



# 五、结尾400

## 9 项目成果200



## 10 项目总结200

- 缺陷1，2
- 解决建议