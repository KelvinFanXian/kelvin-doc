- [技术分享 | MySQL 的嵌套事务、自治事务与链式事务](https://zhuanlan.zhihu.com/p/98025405)



## 普通事务

- 以 begin / start transaction 开始，commit / rollback 结束的事务
- 带有保存点 savepoint 的事务

## 链式事务

- 一个事务在提交的时候自动将上下文传给下一个事务
  - 也就是说一个事务的提交和下一个事务的开始是原子性的
  - 下一个事务可以看到上一个事务的处理结果
- MySQL 的链式事务靠参数 `completion_type` 控制，并且回滚和提交的语句后面加上 `work` 关键词。

## 嵌套事务

- 有多个 begin / commit / rollback 这样的事务块的事务，并且有父子关系
- **子事务**的提交完成后不会真的提交
- 而是**等到父事务提交**才真正的提交

## 自治事务

- 内部事务的提交不随外部事务的影响，一般用作记录内部事务的异常情况
  - MySQL 不支持自治事务，但是某些场景可以用 MySQL 的插件式引擎来变相实现